<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Assistant Legacya</title>
  <style>
    #logoAI {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 80px;
      height: 80px;
      background: url('https://img.icons8.com/ios-filled/100/ffffff/artificial-intelligence.png') no-repeat center/contain;
      background-color: #000;
      border-radius: 50%;
      z-index: 9999;
      animation: pulse 2s infinite;
      cursor: pointer;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    #dialogue {
      position: fixed;
      bottom: 110px;
      right: 20px;
      width: 280px;
      background: rgba(0,0,0,0.7);
      color: white;
      padding: 10px;
      border-radius: 10px;
      font-family: sans-serif;
      display: none;
      z-index: 9999;
    }
  </style>
</head>
<body>

<div id="logoAI" onclick="startSequence()"></div>
<div id="dialogue">Bonjour, je suis Legacya. Cliquez sur 'Carte grise / démarches' dans le menu.</div>

<script>
  const messages = [
    "Bonjour, je suis Legacya. Cliquez sur 'Carte grise / démarches' dans le menu.",
    "Très bien. Maintenant, cliquez sur le bouton bleu 'Continuer'.",
    "Souhaitez-vous faire la demande vous-même ou être recontacté par un conseiller ?",
    "Très bien. Entrez vos informations pour qu’un conseiller vous rappelle."
  ];

  let index = 0;
  let started = false;

  function startSequence() {
    if (started) return;
    started = true;

    document.getElementById('dialogue').style.display = "block";
    speakAndShow();
  }

  function speakAndShow() {
    const msg = messages[index];
    document.getElementById('dialogue').innerText = msg;
    const utterance = new SpeechSynthesisUtterance(msg);
    utterance.lang = 'fr-FR';
    speechSynthesis.speak(utterance);

    index++;
    if (index < messages.length) {
      setTimeout(speakAndShow, 7000); // attendre 7s avant la suite
    }
  }
</script>

</body>
</html>

